<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\163\x69\164\x65"; parent::__construct(); } protected function getData() { goto yL6xU; ub0Vk: return $this->success($site); goto gyYmg; yL6xU: $data = $this->db->select($this->table)->all(); goto mNKH1; plNrQ: foreach ($data as $d) { goto FGKyw; wyePw: TyE7D: goto SZeN1; x9zRT: if (!($value != '')) { goto STexL; } goto EoCVQ; MdWjc: STexL: goto wyePw; EoCVQ: $site[$d["\x6e\141\x6d\145"]] = $value; goto MdWjc; FGKyw: $value = $d["\166\x61\x6c\x75\145"]; goto x9zRT; SZeN1: } goto a1ft1; mNKH1: $site = array(); goto plNrQ; a1ft1: yedx1: goto ub0Vk; gyYmg: } protected function postSave($request_data) { goto wKZ6V; AoCOP: goto iHOyz; goto cXw1Y; sUBpK: $this->db->commit(); goto boDPH; n20AF: iHOyz: goto ARQ9M; v8dSK: return $this->success("\xe5\267\xb2\344\277\235\345\255\x98\346\233\xb4\xe6\x94\xb9\xef\xbc\201"); goto n20AF; wKZ6V: $this->_removeFiles2($request_data["\137\x72\145\x6d\157\x76\145\x66\x69\154\145\x73"]); goto dAJje; cXw1Y: JWdmj: goto sUBpK; CppPq: $this->db->beginTransaction(); goto KAW4_; KXNyB: $this->db->rollBack(); goto rhU5L; boDPH: $this->_log("\x75\160\144\141\164\145", array("\164\151\x74\x6c\x65" => "\xe7\xbd\x91\xe7\253\231\xe8\256\xbe\347\275\256")); goto v8dSK; dAJje: unset($request_data["\x74\x6f\x6b\145\x6e"], $request_data["\x61\144\155\x69\x6e"], $request_data["\137\x72\x65\x6d\x6f\x76\145\146\151\154\145\163"]); goto p0GMg; KAW4_: foreach ($request_data as $name => $value) { goto SyxEP; E1hTv: if (!($this->db->insert($this->table, array("\x6e\141\155\145" => $name, "\166\141\x6c\165\145" => $value))->is() === false)) { goto YlfQo; } goto re8QL; ccbKF: $value = $this->_encode($value); goto Vn1BA; re8QL: $error[] = $name; goto hpSd7; gaB4x: dv9xv: goto E1hTv; hpSd7: YlfQo: goto vThuz; Tj1ge: Mgipk: goto gBKZB; SyxEP: $count = $this->db->select($this->table)->where(array("\156\141\155\x65", "\75", $name))->count(); goto ccbKF; gBKZB: goto k5_2V; goto gaB4x; H1WNy: $error[] = $name; goto Tj1ge; FMHsm: if (!($this->db->update($this->table, array("\166\141\154\165\x65" => $value), array("\x6e\141\155\145", "\75", $name))->is() === false)) { goto Mgipk; } goto H1WNy; vThuz: k5_2V: goto ubVv1; ubVv1: BfcvM: goto wt0qz; Vn1BA: if ($count <= 0) { goto dv9xv; } goto FMHsm; wt0qz: } goto tnE30; rhU5L: return $this->error("\345\xb7\xb2\344\277\235\xe5\255\230\345\xa4\xb1\350\xb4\xa5\xef\274\x81"); goto AoCOP; qiBt3: if (count($error) === 0) { goto JWdmj; } goto KXNyB; p0GMg: $error = array(); goto CppPq; tnE30: tU9uq: goto qiBt3; ARQ9M: } protected function postSkin($request_data) { goto vtTwW; nKlwy: return $this->success("\345\267\262\xe4\277\x9d\xe5\xad\230\xe6\x9b\xb4\xe6\x94\271\xef\274\201"); goto wyqsQ; HEnrT: AcW5K: goto nKlwy; osIOw: unset($request_data["\x74\x6f\153\145\x6e"], $request_data["\x61\x64\155\151\x6e"], $request_data["\163\164\171\x6c\145\x2d\x63\157\144\145"]); goto sZnS5; DXxmo: QJXg3: goto rBGVj; rBGVj: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\x6e\x61\x6d\145" => $name, "\x76\x61\x6c\165\145" => $value), array("\156\x61\155\145", "\x3d", $name)); lsh3K: } goto HEnrT; vtTwW: if (!isset($request_data["\163\164\171\154\145\x2d\143\157\144\x65"])) { goto VfGvw; } goto mg7Ad; r13eE: $skins = explode("\55", $request_data["\x74\x68\x65\155\145\55\x73\x6b\x69\x6e"]); goto Nw9n3; sZnS5: if (!isset($request_data["\164\150\x65\155\145\55\x73\x6b\x69\156"])) { goto QJXg3; } goto r13eE; WsbYz: chmod($filename, 420); goto mUHae; mUHae: VfGvw: goto osIOw; PQlU2: $request_data["\163\x6b\151\x6e"] = $skins[1]; goto DXxmo; mGrCS: file_put_contents($filename, $request_data["\163\164\171\154\145\55\x63\x6f\x64\145"]); goto WsbYz; mg7Ad: $filename = "\56\56\57\141\x73\163\x65\x74\57\143\x73\163\x2f\x73\x74\x79\154\145\x2e\x63\x73\x73"; goto mGrCS; Nw9n3: $request_data["\x74\x68\x65\155\x65"] = $skins[0]; goto PQlU2; wyqsQ: } protected function getStyleCode() { $code = file_get_contents("\x2e\56\x2f\141\x73\163\145\164\57\143\163\163\x2f\163\x74\171\x6c\145\x2e\143\x73\163"); return $this->success(array($code)); } }
